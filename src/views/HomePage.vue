<template>
  <div class="home-page">
    <!-- ====== HERO ====== -->
    <section class="hero">
      <p class="hero-kicker">Tea Data Visualization</p>
      <h1>ã€ŠèŒ¶éŸµå±±æ²³ã€‹<br />ä¸­å›½èŒ¶å¶å¯è§†åŒ–æ¢ç´¢</h1>
      <div class="hero-line"></div>
      <p class="subtitle">ä»¥æ•°æ®ä¸ºç»ã€ä»¥æ–‡åŒ–ä¸ºçº¬<br />æ¢ç´¢ä¸­å›½èŒ¶å¶çš„å“ç±»ã€äº§åœ°ã€è¶‹åŠ¿ä¸åˆ›æ–°</p>
      <div class="hero-scroll-hint">
        <span>å‘ä¸‹æ¢ç´¢</span>
        <span class="arrow"></span>
      </div>
    </section>

    <!-- ====== CAROUSEL ====== -->
    <section class="section">
      <div class="section-header reveal">
        <span class="section-tag">é£å…‰æ å½±</span>
        <h2>ä¸­å›½èŒ¶ä¹¡èƒœæ™¯</h2>
        <div class="section-divider"></div>
        <p>äº‘é›¾ç¼­ç»•çš„èŒ¶å±±ã€å±‚å çš„æ¢¯ç”°ã€å‹¤åŠ³çš„é‡‡èŒ¶äººâ€”â€”èµ°è¿›ä¸­å›½èŒ¶å¶æ ¸å¿ƒäº§åŒº</p>
      </div>
      <div class="carousel-wrap reveal">
        <el-carousel :interval="4500" height="480px" arrow="hover" indicator-position="outside" :pause-on-hover="true">
          <el-carousel-item v-for="slide in carouselSlides" :key="slide.img">
            <div class="carousel-slide">
              <img :src="slide.img" :alt="slide.title" />
              <div class="carousel-overlay">
                <h3>{{ slide.title }}</h3>
                <p>{{ slide.desc }}</p>
              </div>
            </div>
          </el-carousel-item>
        </el-carousel>
      </div>
    </section>

    <!-- ====== STATS ====== -->
    <div class="stat-bar reveal">
      <div class="stat-item" v-for="s in stats" :key="s.label">
        <span class="stat-number" ref="counterEls">{{ s.display }}</span>
        <span class="stat-suffix" v-if="s.suffix">{{ s.suffix }}</span>
        <span class="stat-label">{{ s.label }}</span>
      </div>
    </div>

    <!-- ====== TEA INTRO ====== -->
    <div class="section-full-alt">
      <div class="section-inner">
        <div class="section-header reveal">
          <span class="section-tag">å“ç±»é‰´èµ</span>
          <h2>äº”å¤§èŒ¶ç±»æ¦‚è§ˆ</h2>
          <div class="section-divider"></div>
          <p>ä¸€å¶ä¸€ä¸–ç•Œâ€”â€”ç»¿èŒ¶çš„é²œçˆ½ã€çº¢èŒ¶çš„é†‡åšã€ç™½èŒ¶çš„æ¸…é›…ã€ä¹Œé¾™çš„éŸµå‘³ã€èŒ‰è‰çš„èŠ¬èŠ³</p>
        </div>
        <div class="tea-intro-grid reveal">
          <div v-for="tea in teaIntros" :key="tea.name" class="tea-intro-card">
            <div class="tea-intro-img">
              <img :src="tea.img" :alt="tea.name" />
              <div class="tea-intro-badge">{{ tea.badge }}</div>
            </div>
            <div class="tea-intro-body">
              <h3>{{ tea.name }}</h3>
              <p class="tea-intro-en">{{ tea.en }}</p>
              <p class="tea-intro-desc">{{ tea.desc }}</p>
              <div class="tea-intro-tags">
                <span v-for="tag in tea.tags" :key="tag" class="tea-tag">{{ tag }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ====== FEATURE CARDS ====== -->
    <section class="section">
      <div class="section-header reveal">
        <span class="section-tag">å¼€å§‹æ¢ç´¢</span>
        <h2>ä¸‰å¤§æ ¸å¿ƒæ¿å—</h2>
        <div class="section-divider"></div>
        <p>ä»å“ç±»å¯¹æ¯”åˆ°äº§åœ°æº¯æºï¼Œå†åˆ°åˆ›æ–°èŒ¶é¥®ï¼Œå…¨é¢å±•ç¤ºä¸­å›½èŒ¶äº§ä¸šå…¨æ™¯</p>
      </div>
      <div class="grid-3">
        <router-link to="/compare" class="feature-card reveal reveal-delay-1">
          <div class="feature-icon">ğŸƒ</div>
          <h3>èŒ¶å¶å…¨ç»´åº¦å¯¹æ¯”</h3>
          <p>äº”å¤§èŒ¶ç±»çš„å¤–å½¢ã€å£æ„Ÿã€æˆåˆ†ã€å·¥åºã€åŠŸæ•ˆæ·±åº¦å¯¹æ¯”åˆ†æ</p>
          <span class="feature-arrow">â†’</span>
        </router-link>
        <router-link to="/origins" class="feature-card reveal reveal-delay-2">
          <div class="feature-icon">ğŸ”ï¸</div>
          <h3>äº§åœ°æ•…äº‹ä¸è¶‹åŠ¿</h3>
          <p>çœä»½äº§åŒºç»“æ„ã€å…¨çƒæ ¼å±€ã€ä»£è¡¨äº§åœ°çš„æ•°æ®å™äº‹</p>
          <span class="feature-arrow">â†’</span>
        </router-link>
        <router-link to="/innovation" class="feature-card reveal reveal-delay-3">
          <div class="feature-icon">âœ¨</div>
          <h3>åˆ›æ–°èŒ¶é¥®ç±»å‹</h3>
          <p>èŒ¶+èŒ¶ã€èŒ¶+éèŒ¶ã€èŒ¶+è·¨ç•Œä¸‰å¤§åˆ›æ–°æ–¹å‘å…¨æ™¯æµè§ˆ</p>
          <span class="feature-arrow">â†’</span>
        </router-link>
      </div>
    </section>

    <!-- ====== TIMELINE ====== -->
    <section class="section">
      <div class="section-header reveal">
        <span class="section-tag">æ–‡åŒ–çºµæ·±</span>
        <h2>ä¸­å›½èŒ¶æ–‡åŒ–é‡Œç¨‹ç¢‘</h2>
        <div class="section-divider"></div>
        <p>ä»ä¸Šå¤ä¼ è¯´åˆ°ä¸–ç•Œéé—ï¼Œè·¨è¶Šäº”åƒå¹´çš„èŒ¶ä¹‹æ—…</p>
      </div>
      <div class="timeline reveal">
        <div class="timeline-track">
          <div class="timeline-item" v-for="(ev, idx) in timeline" :key="idx">
            <div class="timeline-dot"></div>
            <div class="timeline-year">{{ ev.year }}</div>
            <div class="timeline-card">
              <span class="timeline-era">{{ ev.era }}</span>
              <p>{{ ev.event }}</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ====== CTA ====== -->
    <section class="section" style="text-align: center;">
      <div class="reveal">
        <h2 class="cta-title">å‡†å¤‡å¥½æ·±å…¥äº†è§£äº†å—ï¼Ÿ</h2>
        <p class="cta-desc">ç‚¹å‡»ä¸‹æ–¹å¼€å§‹æ¢ç´¢äº”å¤§èŒ¶ç±»çš„å…¨ç»´åº¦å¯¹æ¯”åˆ†æ</p>
        <router-link to="/compare" class="cta-btn">å¼€å§‹æ¢ç´¢ â†’</router-link>
      </div>
    </section>
  </div>
</template>

<script setup>
import { nextTick, onBeforeUnmount, onMounted, reactive } from "vue";

/* ====== CAROUSEL DATA ====== */
const carouselSlides = [
  // æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨ç›¸å¯¹è·¯å¾„ \"images/...\"ï¼Œä¿è¯ï¼š
  // 1) å¼€å‘ç¯å¢ƒï¼šhttp://localhost:5173/images/... æ­£å¸¸
  // 2) æ‰“åŒ…å dist/index.html ç›¸å¯¹ dist/images/... æ­£å¸¸
  // 3) Electron åŠ è½½ file:///.../dist/index.html æ—¶ä¹Ÿèƒ½æ‰¾åˆ°å›¾ç‰‡
  { img: "images/carousel1.jpg", title: "é›¾é”èŒ¶å±±", desc: "å±‚å³¦å å¶‚çš„èŒ¶å›­æ¢¯ç”°ï¼Œåœ¨æ™¨é›¾ä¸­è‹¥éšè‹¥ç°" },
  { img: "images/carousel2.jpg", title: "æ—¥å‡ºèŒ¶ä¹¡", desc: "é˜³å…‰æ´’æ»¡ä¸‡äº©èŒ¶å›­ï¼Œèœ¿èœ’å±±è·¯ä¸²è”èµ·åƒå¹´èŒ¶éŸµ" },
  { img: "images/carousel3.jpg", title: "å¿ƒå½¢èŒ¶ç”°", desc: "å¤§è‡ªç„¶çš„æµªæ¼«é¦ˆèµ â€”â€”ä¿¯ç°æ—é—´å¿ƒå½¢èŒ¶å›­" },
  { img: "images/carousel4.jpg", title: "æŠ¹èŒ¶é‡‡æ‘˜", desc: "è´µå·é“œä»çš„æŠ¹èŒ¶èŒ¶å›­ï¼Œæœºæ¢°åŒ–é‡‡æ‘˜æ­£å½“æ—¶" },
  { img: "images/carousel5.jpg", title: "èŒ¶å±±äººå®¶", desc: "èŒ¶å›­ç¯ç»•çš„å±±é—´æ‘è½ï¼Œäººä¸èŒ¶å’Œè°å…±ç”Ÿ" },
];

/* ====== TEA INTRO DATA ====== */
const teaIntros = [
  {
    name: "ç»¿èŒ¶", en: "Green Tea", badge: "ä¸å‘é…µ",
    img: "images/tea_green.jpg",
    desc: "ç»¿èŒ¶æ˜¯ä¸­å›½äº§é‡æœ€å¤§çš„èŒ¶ç±»ï¼Œä»¥æ€é’å·¥è‰ºé”ä½é²œå¶çš„ç¿ ç»¿ä¸æ¸…é¦™ã€‚èŒ¶å¤šé…šå«é‡ä¸°å¯Œï¼Œå£æ„Ÿé²œçˆ½å›ç”˜ï¼Œç´ æœ‰ã€Œå›½é¥®ã€ä¹‹ç§°ã€‚",
    tags: ["é¾™äº•", "ç¢§èºæ˜¥", "æ¯›å³°", "æ¸…çƒ­è§£æ¯’"],
  },
  {
    name: "çº¢èŒ¶", en: "Black Tea", badge: "å…¨å‘é…µ",
    img: "images/tea_black.jpg",
    desc: "çº¢èŒ¶ç»è¿‡å®Œå…¨å‘é…µï¼ŒèŒ¶æ±¤çº¢äº®ã€æ»‹å‘³é†‡åšç”˜ç”œã€‚æ—¢é€‚åˆæ¸…é¥®ï¼Œä¹Ÿæ˜¯å¥¶èŒ¶çš„ç»å…¸åŸºåº•ï¼Œæ˜¯ä¸–ç•Œä¸Šæ¶ˆè´¹é‡æœ€å¤§çš„èŒ¶ç±»ã€‚",
    tags: ["æ­£å±±å°ç§", "ç¥çº¢", "æ»‡çº¢", "æš–èƒƒå…»ç”Ÿ"],
  },
  {
    name: "ç™½èŒ¶", en: "White Tea", badge: "å¾®å‘é…µ",
    img: "images/tea_white.jpg",
    desc: "ç™½èŒ¶ä»¥æœ€ç®€çº¦çš„å·¥è‰ºè‘—ç§°â€”â€”ä¸ç‚’ä¸æ‰ï¼Œæ—¥æ™’èå‡‹ã€‚é“¶é’ˆç™½æ¯«æ»¡æŠ«ï¼Œæ±¤è‰²æµ…æ·¡ï¼Œæ»‹å‘³æ¸…é›…ç”˜ç”œï¼Œã€Œè¶Šé™ˆè¶Šé¦™ã€æ˜¯å…¶ç‹¬ç‰¹é­…åŠ›ã€‚",
    tags: ["ç™½æ¯«é“¶é’ˆ", "ç™½ç‰¡ä¸¹", "å¯¿çœ‰", "ç¾å®¹å…»é¢œ"],
  },
  {
    name: "ä¹Œé¾™èŒ¶", en: "Oolong Tea", badge: "åŠå‘é…µ",
    img: "images/tea_oolong.png",
    desc: "ä¹Œé¾™èŒ¶å…¼å…·ç»¿èŒ¶çš„æ¸…é¦™ä¸çº¢èŒ¶çš„é†‡åšï¼Œä»¥ç²¾æ¹›çš„ã€Œåšé’ã€å·¥è‰ºé—»åã€‚é“è§‚éŸ³çš„å…°èŠ±é¦™ã€å¤§çº¢è¢çš„å²©éª¨èŠ±é¦™ï¼Œå˜å¹»æ— ç©·ã€‚",
    tags: ["é“è§‚éŸ³", "å¤§çº¢è¢", "å‡¤å‡°å•ä¸›", "é™è„‚å‡è‚¥"],
  },
  {
    name: "èŒ‰è‰èŠ±èŒ¶", en: "Jasmine Tea", badge: "å†åŠ å·¥",
    img: "images/tea_jasmine.jpg",
    desc: "ä»¥ç»¿èŒ¶ä¸ºèŒ¶å¯ã€é²œèŒ‰è‰èŠ±çª¨åˆ¶è€Œæˆï¼ŒèŠ±é¦™ä¸èŒ¶éŸµäº¤èã€‚è€åŒ—äº¬äººçš„ã€ŒèŒ¶ä¸­ä¹‹å‹ã€ï¼Œä¸€å£¶èŒ‰è‰èŠ±èŒ¶æ˜¯æœ€æ¸©æš–çš„æ—¥å¸¸ä»ªå¼ã€‚",
    tags: ["èŒ‰è‰é“¶é’ˆ", "ç¢§æ½­é£˜é›ª", "çª¨åˆ¶å·¥è‰º", "æç¥é†’è„‘"],
  },
];

/* ====== STATIC DATA ====== */
const timeline = [
  { year: "å‰2737", era: "ä¸Šå¤", event: "ä¼ è¯´ç¥å†œå°ç™¾è‰ï¼Œå‘ç°èŒ¶å¶è§£æ¯’ä¹‹æ•ˆ" },
  { year: "å‰59", era: "æ±‰ä»£", event: "ç‹è¤’ã€Šåƒ®çº¦ã€‹é¦–æ¬¡ä»¥æ–‡å­—è®°è½½é¥®èŒ¶ä¹ ä¿—" },
  { year: "760", era: "å”ä»£", event: "é™†ç¾½è‘—ã€ŠèŒ¶ç»ã€‹â€”â€”ä¸–ç•Œç¬¬ä¸€éƒ¨èŒ¶å­¦ä¸“è‘—" },
  { year: "1391", era: "æ˜ä»£", event: "æ˜å¤ªç¥–åºŸå›¢èŒ¶å…´æ•£èŒ¶ï¼Œæ”¹å˜é¥®èŒ¶æ–¹å¼" },
  { year: "1610", era: "æ˜ä»£", event: "ä¸­å›½èŒ¶å¶ç»è·å…°å•†èˆ¹é¦–æ¬¡å‡ºå£æ¬§æ´²" },
  { year: "1773", era: "æ¸…ä»£", event: "æ³¢å£«é¡¿å€¾èŒ¶äº‹ä»¶ï¼ŒèŒ¶å¶æ”¹å˜ä¸–ç•Œå†å²" },
  { year: "1915", era: "æ°‘å›½", event: "ä¸­å›½èŒ¶å¶åœ¨å·´æ‹¿é©¬ä¸‡å›½åšè§ˆä¼šè·é‡‘å¥–" },
  { year: "2019", era: "ç°ä»£", event: "è”åˆå›½ç¡®ç«‹æ¯å¹´5æœˆ21æ—¥ä¸ºå›½é™…èŒ¶æ—¥" },
  { year: "2022", era: "ç°ä»£", event: "ä¸­å›½ä¼ ç»Ÿåˆ¶èŒ¶æŠ€è‰ºå…¥é€‰äººç±»éç‰©è´¨æ–‡åŒ–é—äº§" },
];

/* ====== REACTIVE DATA ====== */
const stats = reactive([
  { label: "å¤§ç±»èŒ¶å¶", target: 5, display: 0, suffix: "ç§" },
  { label: "è¦†ç›–çœä»½", target: 18, display: 0, suffix: "ä¸ª" },
  { label: "åˆ›æ–°èŒ¶é¥®", target: 24, display: 0, suffix: "æ¬¾" },
  { label: "æ•°æ®ç»´åº¦", target: 12, display: 0, suffix: "é¡¹" },
]);

/* ====== ANIMATED COUNTER ====== */
function animateCounters() {
  const duration = 1600;
  const start = performance.now();
  function tick(now) {
    const progress = Math.min((now - start) / duration, 1);
    const ease = 1 - Math.pow(1 - progress, 3);
    stats.forEach((s) => { s.display = Math.round(s.target * ease); });
    if (progress < 1) requestAnimationFrame(tick);
  }
  requestAnimationFrame(tick);
}


/* ====== SCROLL REVEAL ====== */
let observer = null;
function setupReveal() {
  observer = new IntersectionObserver(
    (entries) => entries.forEach((e) => { if (e.isIntersecting) { e.target.classList.add("visible"); observer.unobserve(e.target); } }),
    { threshold: 0.1, rootMargin: "0px 0px -60px 0px" }
  );
  document.querySelectorAll(".reveal").forEach((el) => observer.observe(el));
}

/* ====== LIFECYCLE ====== */
onMounted(async () => {
  animateCounters();
  await nextTick();
  setupReveal();
});

onBeforeUnmount(() => {
  observer?.disconnect();
});
</script>

<style scoped>
/* ====== CAROUSEL ====== */
.carousel-wrap {
  max-width: 1100px;
  margin: 0 auto;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 12px 40px rgba(61, 90, 62, 0.12);
}

.carousel-wrap :deep(.el-carousel__indicators--outside) {
  margin-top: 14px;
}

.carousel-wrap :deep(.el-carousel__indicator .el-carousel__button) {
  width: 28px;
  height: 4px;
  border-radius: 2px;
  background: var(--color-border, #d4c8b8);
  opacity: 0.5;
}

.carousel-wrap :deep(.el-carousel__indicator.is-active .el-carousel__button) {
  background: var(--color-primary, #3d5a3e);
  opacity: 1;
  width: 40px;
}

.carousel-wrap :deep(.el-carousel__arrow) {
  background: rgba(15, 13, 10, 0.45);
  backdrop-filter: blur(4px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  width: 44px;
  height: 44px;
  font-size: 16px;
}

.carousel-wrap :deep(.el-carousel__arrow:hover) {
  background: rgba(15, 13, 10, 0.7);
}

.carousel-slide {
  position: relative;
  width: 100%;
  height: 480px;
  overflow: hidden;
}

.carousel-slide img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 6s ease;
}

.carousel-slide:hover img {
  transform: scale(1.05);
}

.carousel-overlay {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 60px 40px 32px;
  background: linear-gradient(transparent, rgba(15, 13, 10, 0.75));
  color: #fff;
}

.carousel-overlay h3 {
  font-family: var(--font-serif, 'Noto Serif SC', serif);
  font-size: 26px;
  font-weight: 600;
  margin-bottom: 6px;
  letter-spacing: 2px;
}

.carousel-overlay p {
  font-size: 15px;
  opacity: 0.85;
  letter-spacing: 1px;
}

/* ====== TEA INTRO GRID ====== */
.tea-intro-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 20px;
  max-width: 1200px;
  margin: 0 auto;
}

.tea-intro-card {
  background: rgba(15, 13, 10, 0.6);
  border-radius: 14px;
  overflow: hidden;
  border: 1px solid rgba(196, 162, 101, 0.12);
  transition: transform 0.4s ease, box-shadow 0.4s ease;
}

.tea-intro-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 16px 40px rgba(0, 0, 0, 0.25);
}

.tea-intro-img {
  position: relative;
  height: 200px;
  overflow: hidden;
}

.tea-intro-img img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.6s ease;
}

.tea-intro-card:hover .tea-intro-img img {
  transform: scale(1.08);
}

.tea-intro-badge {
  position: absolute;
  top: 12px;
  right: 12px;
  background: rgba(196, 162, 101, 0.85);
  color: #fff;
  font-size: 11px;
  font-weight: 600;
  padding: 3px 10px;
  border-radius: 20px;
  letter-spacing: 1px;
  backdrop-filter: blur(4px);
}

.tea-intro-body {
  padding: 18px 16px 20px;
}

.tea-intro-body h3 {
  font-family: var(--font-serif, 'Noto Serif SC', serif);
  font-size: 20px;
  font-weight: 600;
  color: rgba(232, 224, 213, 0.95);
  margin-bottom: 2px;
}

.tea-intro-en {
  font-size: 12px;
  color: rgba(196, 162, 101, 0.6);
  text-transform: uppercase;
  letter-spacing: 1.5px;
  margin-bottom: 10px;
}

.tea-intro-desc {
  font-size: 13px;
  line-height: 1.7;
  color: rgba(200, 190, 175, 0.7);
  margin-bottom: 14px;
}

.tea-intro-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.tea-tag {
  font-size: 11px;
  padding: 3px 10px;
  border-radius: 20px;
  background: rgba(196, 162, 101, 0.1);
  color: rgba(196, 162, 101, 0.75);
  border: 1px solid rgba(196, 162, 101, 0.15);
  white-space: nowrap;
}

/* ====== RESPONSIVE ====== */
@media (max-width: 1100px) {
  .tea-intro-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media (max-width: 768px) {
  .carousel-slide {
    height: 280px;
  }
  .carousel-wrap :deep(.el-carousel) {
    height: 280px !important;
  }
  .carousel-overlay h3 {
    font-size: 20px;
  }
  .carousel-overlay p {
    font-size: 13px;
  }
  .tea-intro-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 480px) {
  .tea-intro-grid {
    grid-template-columns: 1fr;
  }
}
</style>
